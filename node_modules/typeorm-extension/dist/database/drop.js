"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.dropDatabase = void 0;
const errors_1 = require("../errors");
const driver_1 = require("./driver");
const utils_1 = require("./utils");
/**
 * Drop database for specified driver in ConnectionOptions.
 *
 * @throws DriverError
 * @throws OptionsError
 *
 * @param context
 */
async function dropDatabase(context) {
    context = await (0, utils_1.buildDatabaseDropContext)(context);
    if (!context.options) {
        throw errors_1.OptionsError.undeterminable();
    }
    if (!context.options.type) {
        throw errors_1.DriverError.undeterminable();
    }
    switch (context.options.type) {
        case 'mysql':
        case 'mariadb':
            return (0, driver_1.dropMySQLDatabase)(context);
        case 'postgres':
            return (0, driver_1.dropPostgresDatabase)(context);
        case 'cockroachdb':
            return (0, driver_1.dropCockroachDBDatabase)(context);
        case 'sqlite':
        case 'better-sqlite3':
            return (0, driver_1.dropSQLiteDatabase)(context);
        case 'oracle':
            return (0, driver_1.dropOracleDatabase)(context);
        case 'mssql':
            return (0, driver_1.dropMsSQLDatabase)(context);
    }
    throw errors_1.DriverError.notSupported(context.options.type);
}
exports.dropDatabase = dropDatabase;
